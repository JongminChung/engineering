# 모니터링

## 서비스 모니터링

- 고객의 PV, UV, Impression
- 검색량
- 주문 건 수, 결제 건 수
- 가입자, 탈퇴
- 판매 등록
- 핵심 사업 지표들

## 시스템 모니터링

- CPU, Memory, GC, Database Connection
- Request, Throughput, Response Time, TTI
- 에러 개수
- 저장소 공간
- SSL 인증서 만료
- 카프카 랙

### 기술

1. Prometheus + Grafana
2. Pinpoint

### Tip

1. 핵심 지표만 모니터링
2. 사업 지표와 시스템 지표 분리
3. **알림**과 연결

## Grafana 란?

- 자신의 서비스에서 발생하는 지표, 로그, 흔적들을 활용
    - 데이터 소스
- 데이터 소스의 조회, 시각화 및 알림 기능을 제공

## Grafana 기능들

- 시스템 모니터링
- 비지니스 모니터링
- 임계치 설정을 통한 알림

- DataSource 설정 추가
    - mysql 계정 연결 할 때는 grafana 용 계정을 만들어 사용

## Grafana 쿼리 기본 정보

- 쿼리
    - 테이블(table) 또는 시계열 데이터(time series). 시계열을 time 컬럼 필수
    - 쿼리는 데이터 소스마다 다르다. (RDB vs Prometheus)
        - <https://grafana.com/docs/grafana/latest/datasources/> (가이드 문서)
    - 쿼리 빌더(GUI) 또는 직접 쿼리 가능
- 편의 매크로 지원 - $\_\_timeFilter(dateColumn)
